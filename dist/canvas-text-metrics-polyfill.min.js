/*! canvas-text-metrics-polyfill 23-11-2014 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return"string"==typeof a?a:"font: "+a.font+"; textBaseline: "+a.textBaseline}function d(a){var b=c(a);return g.hasOwnProperty(b)?g[b]:{}}function e(a,b){for(var e=c(a),f=["alphabeticBaseline","hangingBaseline","ideographicBaseline","emHeightAscent","emHeightDescent"],h=d(e),i=0;f>i;++i){var j=f[i];h.hasOwnProperty(j)||b.hasOwnProperty(j)&&void 0!==b[j]&&(h[j]=b[j]-h[j])}g[e]=h}function f(){g={}}var g={};b.exports={fetch:d,store:e,clear:f}},{}],2:[function(a,b){b.exports=function(){"use strict";var a,b=255,c=4294967295,d=null,e="",f=null,g=null,h="",i={top:0,bottom:0,left:0,right:0},k=null,l=null;this.document=function(a){return arguments.length>0?(d!=a&&(n(),d=a),this):d},this.text=function(a){return arguments.length>0?(e!=a&&(k=null,l=null,e=a,r()),this):e},this.font=function(a){return arguments.length>0?(h!=a&&(h=a,q()),this):h};var m=function(){d&&(f&&f.ownerDocument==d||(p(),f=d.createElement("canvas"),f.height=1,f.width=1,f.style.visibility="hidden",g=null),g||(g=f.getContext("2d",{alpha:!1})))},n=function(){p(),f=null,g=null},o=function(){d&&(m(),f.style.display="",d.body.appendChild(f))},p=function(){f&&(f.width=f.height=0,f.style.display="none",f.parentNode&&f.parentNode.removeChild(f))},q=function(){if(m(),f&&g&&g.font!=h){f.style.font=f.font=g.font=h,a=1*f.style.fontSize.replace("px","");var b=a/2;i.top=i.bottom=i.left=i.right=b,k=null}},r=function(){m(),g&&(q(),k||(k=g.measureTextWidth(e)),null===l&&(l=!/\S/.test(e)))},s=function(a,b){for(var c=0;++c<a.length&&a[c]===b;);return c},t=function(a,b){for(var c=a.length-1;--c>0&&a[c]===b;);return c},u=function(a,b,c,d){var e=c*d,f=0,g=0;for(f=0,g=0;f<a.length&&c>g&&a[f]===b;)f+=e,f>=a.length&&(f=f-a.length+d,++g);return{i:f,j:g}},v=function(a,b,c,d){var e,f,g=c*d,h=1;for(e=a.length-Math.max(d-1,1),f=c-1;e>=0&&f>=0&&a[e]===b;)e-=g,0>e&&(e=a.length-Math.max(d-1,1)-h++*d,--f);return{i:e,j:f}};this.measure=function(d,m){if(r(),l)return{width:k.width};var n=2;o();var p="rtl"==d.direction;void 0===m&&(m={top:!0,left:!0,right:!0,bottom:!0}),m.top=m.hasOwnProperty("top")&&m.top,m.left=m.hasOwnProperty("left")&&m.left,m.right=m.hasOwnProperty("right")&&m.right,m.bottom=m.hasOwnProperty("bottom")&&m.bottom;var q,w,x=m.top,y=m.left,z=m.right,A=m.bottom,B=0,C=0,D=f.width=k.width,E=f.height;if(0===D)throw new Error("cannot measure this string");q=4*D,w=D;for(var F,G,H,I;x||A||y||z;){var J=i.left+i.right,K=i.top+i.bottom;if(K>10*a)throw new Error("Could not find text on canvas");var L,M,N,O;if(D=f.width=k.width+J|0,q=4*D,w=D,y||z){switch(d.textAlign){case"end":B=p?i.left:D-i.right;break;case"left":B=i.left;break;case"center":B=(f.width-J)/2+i.left;break;case"right":B=D-i.right;break;case"start":default:B=p?D-i.right:i.left}B-=i.left}if(E=f.height=a+K|0,x||A){switch(d.textBaseline){case"hanging":case"top":C=i.top;break;case"middle":C=(f.height-K)/2+i.top;break;case"bottom":case"ideographic":case"alphabetic":default:C=f.height-i.bottom}C-=i.top}g.fillStyle="white",g.fillRect(-2,-2,D+2,E+2),g.fillStyle="black",g.font=h,g.textBaseline=d.textBaseline,g.textAlign=d.textAlign,g.fillText(e,B+i.left,C+i.top);var P,Q,R,S,T,U,V,W=g.getImageData(0,0,D,E).data,X="[object Uint8ClampedArray]"===Object.prototype.toString.call(W);if(X){var Y=new Uint32Array(W.buffer);S=Y,T=c,U=w,V=1}else S=W,T=b,U=w8,V=4;P=S.length;var Z=!1;x&&(Q=s(S,T),Q==P?Z=!0:(F=(Q/U|0)-i.top,F<=1-i.top?N=i.top?i.top*n:basePadding:x=!1)),!Z&&A&&(Q=t(S,T),0===Q?Z=!0:(G=(Q/U+1|0)-i.top,G>=E-1-i.top?O=i.bottom?i.bottom*n:basePadding:A=!1)),!Z&&y&&(R=u(S,T,D,V),Q=R.i,j=R.j,j==D?Z=!0:(H=(Q%U/V|0)-i.left|0,H<=1-i.left?L=i.left?i.left*n:basePadding:y=!1)),z&&(R=v(S,T,D,V),Q=R.i,j=R.j,0>j?Z=!0:(I=(Q%U/V|0)+1-i.left|0,I>=D-1-i.left?M=i.right?i.right*n:basePadding:z=!1)),Z?(x=m.top,y=m.left,z=m.right,A=m.bottom,i.left=L=i.left?i.left*n:basePadding,i.right=M=i.right?i.right*n:basePadding,i.top=N=i.top?i.top*n:basePadding,i.bottom=O=i.bottom?i.bottom*n:basePadding):(y&&(i.left=L),z&&(i.right=M),x&&(i.top=N),A&&(i.bottom=O),(y||z||x||A)&&(x=m.top,y=m.left,z=m.right,A=m.bottom))}var $={width:k.width,actualBoundingBoxLeft:m.left?B-H:void 0,actualBoundingBoxRight:m.right?I-B:void 0,actualBoundingBoxAscent:m.top?C-F:void 0,actualBoundingBoxDescent:m.bottom?G-C:void 0};return $},this.end=function(){p()}}},{}],3:[function(a,b){var c="http://www.w3.org/2000/svg";b.exports=function(){"use strict";var a=null,b="",d=null,e=null,f="";this.document=function(b){return arguments.length>0?(a!=b&&(i(),a=b),this):a},this.text=function(a){return arguments.length>0?(b!=a&&(b=a,h()),this):b},this.font=function(a){return arguments.length>0?(f!=a&&(f=a,h()),this):f};var g=function(){a&&(d&&d.ownerDocument==a||(k(),d=a.createElementNS(c,"svg"),d.setAttributeNS(c,"height",100),d.setAttributeNS(c,"width",100),d.style.visibility="hidden"))},h=function(){g(),a&&d&&(e||(e=a.createElementNS(c,"text"),e.x.baseVal=0,e.y.baseVal=0,e.setAttributeNS(c,"fill","black")),e.textContent!=b&&(e.textContent=b),f&&e.style.font!=f&&(e.style.font=f))},i=function(){b="",e="",f=""},j=function(){a&&(g(),d&&!d.parentNode&&a.body.appendChild(d))},k=function(){a&&d&&d.parentNode&&d.parentNode.removeChild(d)};return this.measure=function(a){if(h(),!e)return void 0;j(),e.style.direction=a.direction;var b="rtl"==a.direction;switch(a.textAlign){case"left":e.style.textAnchor=b?"end":"start";break;case"right":e.style.textAnchor=b?"start":"end";break;case"center":e.style.textAnchor="middle";break;case"start":case"end":default:e.style.textAnchor=a.textAlign}switch(a.textBaseline){case"top":e.style.alignmentBaseline="before-edge";break;case"hanging":e.style.alignmentBaseline="text-before-edge";break;case"alphabetic":e.style.alignmentBaseline="text-after-edge";break;case"bottom":e.style.alignmentBaseline="after-edge";break;case"middle":e.style.alignmentBaseline="central";break;case"ideographic":default:e.style.alignmentBaseline=a.textBaseline}d.appendChild(e);var c=e.getBBox();d.removeChild(e);var f={actualBoundingBoxLeft:c.x,actualBoundingBoxRight:c.width+c.x,fontBoundingBoxAscent:-c.y,fontBoundingBoxDescent:c.height+c.y};return f},this.end=function(){k()},this}},{}],4:[function(a){(function(b){"use strict";function c(a){this.width=this.actualBoundingBoxLeft=this.actualBoundingBoxRight=this.fontBoundingBoxAscent=this.fontBoundingBoxDescent=this.actualBoundingBoxAscent=this.actualBoundingBoxDescent=this.emHeightAscent=this.emHeightDescent=this.hangingBaseline=this.alphabeticBaseline=this.ideographicBaseline=void 0,this.raw=a;for(var b in a)this.hasOwnProperty(b)&&(this[b]=a[b])}function d(a){var c="ltr";return a.currentStyle?c=a.currentStyle.direction:b.getComputedStyle&&(c=a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue("direction")),c}var e=a("./CanvasMeasurementContext"),f=a("./SVGMeasurementContext"),g=a("./sniffsvg"),h=a("./BaselineCache");if(!document.createElement("canvas").getContext("2d").measureText("").hasOwnProperty("actualBoundingBoxAscent")){var i=g(document);b.CanvasRenderingContext2D.prototype.measureTextWidth=b.CanvasRenderingContext2D.prototype.measureText;var j=null,k=null;b.CanvasRenderingContext2D.prototype.measureText=function l(a,b){if("string"==typeof b)switch(b){case"native":return this.measureTextWidth();case"clear-baselines":h.clear()}var m;if("object"==typeof b&&b){m={width:!0,alphabeticBaseline:!1,hangingBaseline:!1,ideographicBaseline:!1,emHeightAscent:!1,emHeightDescent:!1,actualBoundingBoxLeft:!1,actualBoundingBoxRight:!1,actualBoundingBoxAscent:!1,actualBoundingBoxDescent:!1,fontBoundingBoxAscent:!1,fontBoundingBoxDescent:!1};for(var n in b)m[n]=void 0!==b[n]}else m={width:!0,alphabeticBaseline:!0,hangingBaseline:!0,ideographicBaseline:!0,emHeightAscent:!0,emHeightDescent:!0,actualBoundingBoxLeft:!0,actualBoundingBoxRight:!0,actualBoundingBoxAscent:!0,actualBoundingBoxDescent:!0,fontBoundingBoxAscent:!0,fontBoundingBoxDescent:!0};var o=this.canvas&&this.canvas.ownerDocument?this.canvas.ownerDocument:document;i||(i=g(this.doc));var p=!/\S/.test(a),q="rtl"==this.direction||"inherit"==this.direction&&"rtl"==d(this.canvas),r={textBaseline:this.textBaseline,textAlign:this.textAlign,direction:q?"rtl":"ltr"},s={},t={alphabeticBaseline:"alphabetic",hangingBaseline:"hanging",ideographicBaseline:"ideographic",emHeightAscent:"top",emHeightDescent:"bottom"},u={alphabeticBaseline:!0,hangingBaseline:!0,ideographicBaseline:!0,emHeightAscent:!0,emHeightDescent:!0,fontBoundingBoxAscent:!0,fontBoundingBoxDescent:!0};if(p){s.width=this.measureTextWidth(a).width,s.actualBoundingBoxLeft=0,s.actualBoundingBoxRight=s.width;var v=0;switch(r.textAlign){case"end":v=q?0:s.width;break;case"left":v=0;break;case"center":v=s.width/2;break;case"right":v=s.width;break;case"start":default:v=q?s.width:0}s.actualBoundingBoxLeft-=v,s.actualBoundingBoxRight-=v;var w={},x=!1;for(var y in m)m[y]&&(u.hasOwnProperty(y)?x=w[y]=!0:("actualBoundingBoxAscent"==y||"actualBoundingBoxDescent"==y)&&(x=w.alphabeticBaseline=!0));if(x){var z="_",A=l.call(this,z,w);for(var B in A)m[B]&&u.hasOwnProperty(B)&&void 0!==A[B]&&(s[B]=A[B]);s.actualBoundingBoxAscent=-A.alphabeticBaseline,s.actualBoundingBoxDescent=A.alphabeticBaseline}return new c(s)}j||(j=new e),j.document(o).font(this.font).text(a);var C={top:!0,left:!0,right:!0,bottom:!0};C.left=m.actualBoundingBoxLeft,C.right=m.actualBoundingBoxRight,C.top=m.actualBoundingBoxAscent||m.alphabeticBaseline||m.hangingBaseline||m.ideographicBaseline||m.emHeightAscent||m.emHeightDescent,C.bottom=m.actualBoundingBoxDescent;var D=h.fetch(r),E=j.measure(r,C),F=E.actualBoundingBoxAscent;for(var G in E)m[G]&&void 0!==E[G]&&(s[G]=E[G]);var H=!0;for(var I in t)if(m[I])if(t[I]!=this.textBaseline){if(D.hasOwnProperty(I))s[I]=D[I];else if(!s.hasOwnProperty(I)){var J=t[I];H&&(a.length>1&&(F=j.text("_").measure(r,{top:!0}).actualBoundingBoxAscent),H=!1);var K=j.measure({textBaseline:J,textAlign:this.textAlign,direction:q?"rtl":"ltr"},{top:!0});s[I]=K.actualBoundingBoxAscent-F}}else s[I]=0;if(j.end(),m.width&&!s.hasOwnProperty("width")&&(s.width=this.measureTextWidth(a).width),(m.fontBoundingBoxAscent||m.fontBoundingBoxDescent)&&i.svg&&i.svgText11){k||(k=new f),k.document(o).font(this.font).text(a);var L=k.measure(r,{top:!0,bottom:!0});m.fontBoundingBoxAscent&&(s.fontBoundingBoxAscent=L.fontBoundingBoxAscent),m.fontBoundingBoxDescent&&(s.fontBoundingBoxDescent=L.fontBoundingBoxDescent),k.end()}return h.store(r,s),new c(s)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BaselineCache":1,"./CanvasMeasurementContext":2,"./SVGMeasurementContext":3,"./sniffsvg":5}],5:[function(a,b){var c="http://www.w3.org/2000/svg";b.exports=function(a){return a?{svg:!!a.createElementNS&&!!a.createElementNS(c,"svg").createSVGRect,svgText11:a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Text","1.1")}:void 0}},{}]},{},[4]);